# Контрольная точка #1: Анализ текстовых данных

## Распределение по вариантам

**Группа ИТ-9-24-4**

Вариант 1: Андриенко Андрей, Антонов Сергей, Косачёв Фёдор, Лавров Никита, Липин Даниил

Вариант 2: Коровина Дарья, Мерзликин Максим, Смирнова Марина, Соколов Роман, Черников Александр

Вариант 3: Белова Нина, Воронов Тимофей, Катола Владислав, Князев Артем, Линдблад Артур, Михалев Тимур, Муродов Шамсиддин, Поликарпов Филипп, Пятыров Ярослав, Рубцов Владислав, Смуров Захар, Щеглов Савелий

## Вариант I (Номера 1-13 по списку)

**Задание I.1**

Вариант посвящен задаче **текстового поиска**. В минимальном варианте - это поиск по обычной подстроке с указанием границ найденных фрагментов, к этому добавляется поиск по регулярным выражением, фильтрация поддерживаемых типов файлов, обход директорий и форматированный вывод результатов.

Сначала реализуйте базовый функционал в `use_cases/search.py`. Главной функцией должна остаться `search`, дописывайте код в неё, не меняя интерфейс. Если считаете правильным создать вспомогательные функции, это приветствуется.

1. Написать логику для поиска обычных подстрок в тексте (2 балла).
2. Добавить функционал поиска по регулярным выражениям (1 балл).
3. Проверять регулярные выражения и выбрасывать исключение в случае их некорректности (1 балл). 

Реализованная вами функция уже подключена к консольному приложению, и если вы не меняли её интерфейс, она будет работать без исправлений. Ознакомьтесь с модулем `cli/__init__.py`. Вас интересует команда `search`, которая в качестве аргументов ожидает `pattern` для поиска и путь `input` к текстовым файлам или директории. Опцию `rich` тоже пока не трогаем, пусть работает со значением по умолчанию.

Для проверки используйте команды

```sh
uv run python-kt-1 search уже corpus/1.txt corpus/3.txt 
uv run python-kt-1 search она corpus/2.txt
```

После предыдущего этапа может показаться, что дорабатывать больше нечего. Но согласно документации нашего приложения, помимо перечня файлов оно должно корректно работать и в том случае, если указана директория. Помимо этого, нужно чтобы поиск производился только в текстовых файлах, значит нужна некоторая фильтрация входных данных (некорректные файлы требуется игнорировать).

Убедитесь, что сейчас этот функционал отсутствует.

```sh
uv run python-kt-1 search уже corpus/2.txt corpus/image.png 
uv run python-kt-1 search она corpus/
```

4. Реализовать возможность поиска по директории. Вносите изменения в функцию `get_files_from_path_arguments` модуля `cli/parse_params.py` (1 балл).
5. Реализовать фильтрацию файлов перед обработкой: на обработку должны быть отправлены только текстовые файлы (достаточно проверки на `.txt`, но приветствуются и более глубокомысленные подходы). Вносите изменения в функцию `get_files_from_path_arguments` модуля `cli/parse_params.py` (1 балл).
6. Начать обрабатывать опцию `rich`, добавив возможность форматированного вывода результатов с использованием библиотеки `rich` или `textual`. Обе библиотеки уже добавлены в проект, нужно лишь выбрать, импортировать и применить. Функции для отрисовки разместите в модуле `cli/renderer.py` (1 балл).
7. Выбрасывать кастомные исключения, унаследованные от того базового класса исключений, который кажется вам максимально логичным для конкретного случая. Разместите исключения в модуле `core/exceptions.py` (1 балл).

**Задание I.2**

_Примечание:_ рекомендую дождаться, пока мы изучим предобработку текстов и выполним предварительные шаги на занятии, впрочем, дело ваше

- tag-cloud
- лемматизация, тримминг

## Вариант II (Номера 14-26 по списку)

**Задание II.1**

Вариант посвящен задаче подсчета статистики для текстовых данных. В минимальном варианте это укрупненная аналитика по абзацам, предложениям, словам, а также посимвольная аналитика. Далее к ним добавляется более близкий к индустрии обработки естественного языка блок, посвященный анализу частей речи.

Сначала реализуйте базовый функционал в `core/stats.py`.

1. Реализуйте посимвольную аналитику в функции `_get_symbols_stats`. Следите за форматом выходных данных: он должен соответствовать аннотации типов и примеру из док-строки (1 балл).
2. Реализуйте подсчёт абзацев, предложений и слов. Для этого разрешается использовать метод `split`, его альтернативу на регулярных выражениях - `re.split`, либо иные встроенные (!) методы (2 балла).

Для проверки используйте команду

```sh
uv run python-kt-1 stats corpus/2.txt
```

Двигаемся дальше. Согласно описанию команды `stats` в модуле `cli/__init__.py`, должны поддерживаться два формата вывода: форматированный консольный (по умолчанию) и неформатированный вывод в файл.

3. Реализуйте форматированный вывод результатов в консоль, используя библиотеку `rich` или `textual`. Обе уже добавлены в проект, нужно лишь выбрать, импортировать и применить. Функции для отрисовки разместите в модуле `cli/renderer.py` (1 балл).
4. Теперь неформатированный вывод в файл. Такой способ должен вызываться при передаче пользователем опции `--output` с указанием пути к выходному файлу. Используйте связку функций `json.dump` и `pathlib.open` для записи по указанному пути (1 балл). 

Для проверки используйте команды

```sh
uv run python-kt-1 stats corpus/2.txt
uv run python-kt-1 stats corpus/2.txt --output corpus/result_2.txt
```

5. Можно обработать также особый случай - когда файл, путь к которому задал пользователь, уже существует. В этом случае спросите пользователя, хочет ли он перезаписать файл, дописать в конец, или исправить указанный путь (1 балл). 
6. Реализуйте статистику по частям речи (part-of-speech), используя библиотеку `SpaCy` (уже добавлена в проект, нужно лишь импортировать и применить). Основную работу ведите в в `use_cases/stats.py`. Если реализовывали пункт 3, добавьте вывод POS-статистики к написанному ранее в `cli/renderer.py` (2 балла).


**Задание II.2**

_Примечание:_ рекомендую дождаться, пока мы изучим предобработку текстов и выполним предварительные шаги на занятии, впрочем, дело ваше

- top-words
- лемматизация, тримминг

### Установка uv

Linux / macOS

```sh
curl -LsSf https://astral.sh/uv/install.sh | sh
```

Windows Powershell

```powershell
powershell -ExecutionPolicy ByPass -c "irm https://astral.sh/uv/install.ps1 | iex"
```

### Установка зависимостей

```sh
uv sync
```

### Проверка связи

```
uv run python-kt-1 --help
```
